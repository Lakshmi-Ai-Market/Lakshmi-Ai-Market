<!-- templates/strategy_switcher.html -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Strategy Switcher</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

  <!-- Header -->
  <header class="header">
    <div class="logo">ğŸ’¼ Lakshmi AI</div>
    <div class="dropdown" id="menu-dropdown">
      <a href="/">ğŸ  Dashboard</a>
      <a href="/strategy">ğŸ“˜ Strategy Builder</a>
      <a href="/strategy-switcher">ğŸ¯ Strategy Switcher</a>
      <a href="/strategy-engine">ğŸ’‹ Strategy Engine</a>
      <a href="/candle">ğŸ”® Candle Predictor</a>
      <a href="/matrix">ğŸ“Š Strategy Matrix</a>
      <a href="/analyzer">ğŸ“ˆ Strategy Analyzer</a>
      <a href="/ask-ai">ğŸ¤– Ask AI</a>
      <a href="/option-chain">ğŸ’¹ Option Chain Viewer</a>
      <a href="/backtester">ğŸ” Back-tester</a>
      <a href="/neuron">ğŸ§  Neuron Analysis</a>
    </div>
  </header>

  <div class="container">
    <h1 class="title">ğŸ¯ Strategy Switcher</h1>
    <form method="post" action="/select-strategy" id="strategy-form" class="form-box">
      <label for="vix">India VIX:</label>
      <input type="number" name="vix" id="vix" placeholder="e.g., 18" required>

      <label for="trend">Market Trend:</label>
      <select name="trend" id="trend">
        <option value="up">Bullish</option>
        <option value="down">Bearish</option>
        <option value="sideways">Sideways</option>
      </select>

      <label for="volatility">Volatility:</label>
      <select name="volatility" id="volatility">
        <option value="low">Low</option>
        <option value="medium">Medium</option>
        <option value="high">High</option>
      </select>

      <label for="is_expiry">Is Today Expiry?</label>
      <select name="is_expiry" id="is_expiry">
        <option value="false">No</option>
        <option value="true">Yes</option>
      </select>

      <button type="submit" class="btn">Get Strategy</button>
    </form>

    <div id="result" class="result-box" style="margin-top: 20px;"></div>

    <a href="/" class="btn back-btn">â¬…ï¸ Back to Dashboard</a>
  </div>

  <script>
    const form = document.getElementById('strategy-form');
    const resultBox = document.getElementById('result');

    form.addEventListener('submit', async function(e) {
      e.preventDefault();
      const data = {
        vix: parseFloat(document.getElementById('vix').value),
        trend: document.getElementById('trend').value,
        volatility: document.getElementById('volatility').value,
        is_expiry: document.getElementById('is_expiry').value === "true"
      };

      const res = await fetch("/select-strategy", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });

      const json = await res.json();
      resultBox.innerHTML = `
        <p><strong>Strategy Name:</strong> ${json.strategy_name}</p>
        <p><strong>Strategy ID:</strong> ${json.strategy_id}</p>
      `;
    });
  </script>

</body>
</html>
